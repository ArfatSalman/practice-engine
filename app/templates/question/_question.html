
{% if not macros %}
	{% import "_macros.html" as macros %}
{% endif %}

{% if ques %}

		<!-- This is the question accessories -->
		<div class="row">
			<div class="col-md-1 accessories ">
				<div class="btn-group-vertical">

					{% if current_user.has_upvoted(ques) %}
						<button href="#" data-count="{{ques.upvoted_by.count()}}" id="upvote" class="btn btn-success">
					{% else %}
						<button href="#" data-count="{{ques.upvoted_by.count()}}" id="upvote" class="btn btn-default">
					{% endif %}
						<span class="glyphicon glyphicon-chevron-up" aria-hidden="true"></span>
					</button>


					<h4 class="upvote-count text-center">{{ques.votes}}</h4>

					{% if current_user.has_downvoted(ques) %}
						<button id="downvote" data-count="{{ques.downvoted_by.count()}}" class="btn btn-success">
					{% else %}
						<button id="downvote" data-count="{{ques.downvoted_by.count()}}" class="btn btn-default">
					{% endif %}
					<span class="glyphicon glyphicon-chevron-down" aria-hidden="true"></span>
					</button>

					<button id="difficulty" class="btn btn-default"> 
						<p>5</p><p>34</p>
					</button>

					{% if current_user.has_favourited(ques) %}
					<button id="favourite" data-count="{{ques.fav_by.count()}}" class="btn btn-success">
						<span class="glyphicon glyphicon-star" aria-hidden="true"></span>
					{% else %}
					<button id="favourite" data-count="{{ques.fav_by.count()}}" class="btn btn-default">
						<span class="glyphicon glyphicon-star-empty" aria-hidden="true"></span>
					{% endif %}
					</button>

					{% if current_user.id == ques.author_id %}
					<a href="{{url_for('question.edit_question', id=ques.id)}}" id="edit" class="btn btn-info">
						<span class="glyphicon glyphicon-edit" aria-hidden="true"></span>
					</a>
					{% endif %}

					{% if current_user.has_solved(ques) %}
					<button id="solved-question" class="btn btn-success">
						<span class="glyphicon glyphicon-ok-sign" aria-hidden="true"></span>
					</button>
					{% endif %}


					<button id="flag-question" data-count="{{ques.reported_wrong_ques}}" class="btn btn-default">
						<span class="glyphicon glyphicon-ban-circle" aria-hidden="true"></span>
					</button>

				</div>
			</div>

			<div class="col-md-11">
				<h5>Tags</h5>
				{% for tag in ques.tags %}
					<span class="label label-info">{{tag.tagname}}</span>
				{% endfor %}
			</div>
			
			<div class="col-md-11">				
				<h5>Question</h5>

				<div>
					<p class="lead">{{ques.body}}</p>
				</div>
			</div>

			<div class="col-md-11">
				<form class="option-form">
					<input name="question-id" type="hidden" value="{{ques.id}}">
					
					
					<h5>Options</h5>
					

					{% set options = ques.options %}
					{% for option in options %}
						{% if option.body %}
							<div class="options">
								<div class="btn btn-default btn-block">
									{{option.body}}
								</div>
								<!-- <p>{{option.body}}</p> -->
								<input type="hidden" value="{{option.id}}">
							</div>
						{% endif %}
					{% endfor %}

					<div class="row">
						<div class="col-md-4 col-md-offset-4">
							<input id="submit-options" class="btn btn-primary btn-block" autocomplete="off" type="submit" value="Check">
						</div>
						<div class="col-md-1 col-md-offset-2 pull-right">

							<div class="dropdown pull-right">
								<button id="ques-control" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
									<span class="caret"></span>
								</button>

								<ul class="dropdown-menu">
									<li><a href="{{url_for('question.questions', id=ques.id)}}">Permalink</a></li>
									<li><a href="#">Another</a></li>
								</ul>
							</div>

						</div>
					</div>
				</form>
			</div>


			<div class="row">
				<div class="col-md-12">
					<hr>
				</div>
			</div>

			<div class="col-md-12">
				
				<div class="row">
					<div id="desc" class="col-md-9">
						<h5>Description</h5>
						<p class="lead">{{ques.description}}</p>
					</div>

					<div class="user-box col-md-3">
						<img width="50px" src="{{session['user_picture']}}" alt="{{session['username']}}" />
						<a href="">{{session['username']}}</a>
						<b>Current User: {{current_user.score}}</b>
						<p>{{ques.timestamp.strftime('%a %b %Y %I:%M %p')}}</p> 
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-md-12">
					<hr>
				</div>
			</div>

				<div class="col-md-12">
					<div> 
						<ul class="nav nav-tabs" role="tablist"> 
							<li role="presentation" class="dropdown"> 
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Solutions <span class="caret"></span></a> 

								<ul class="dropdown-menu"> 
									<li><a href="#view-solutions" role="tab" data-toggle="tab">View Solutions</a>
									</li> 

									<li><a href="#post-solution" role="tab" data-toggle="tab">Post Solutions</a>
									</li> 
								</ul> 
							</li> 
						</ul> 
						
						<div class="tab-content"> 

							<div role="tabpanel" class="tab-pane fade in active" id="view-solutions"> <p>Etsy
										 mixtape wayfarers, ethical wes anderson tofu before they sold out 
										mcsweeney's organic lomo retro fanny pack lo-fi farm-to-table readymade.
										 Messenger bag gentrify pitchfork tattooed craft beer, iphone skateboard
										 locavore carles etsy salvia banksy hoodie helvetica. DIY synth PBR 
										banksy irony. Leggings gentrify squid 8-bit cred pitchfork. Williamsburg
										 banh mi whatever gluten-free, carles pitchfork biodiesel fixie etsy 
										retro mlkshk vice blog. Scenester cred you probably haven't heard of 
										them, vinyl craft beer blog stumptown. Pitchfork sustainable tofu synth 
										chambray yr.</p> 
							</div> 

							<div role="tabpanel" class="tab-pane fade" id="post-solution"> 
								{% set sol = ques.solution_by_user(current_user)%}
								
								{% if sol %}
									<p>sol.body</p>
								{% else %}
								<form id="solution-form" action="post">
									{{sol_form.hidden_tag()}}

									{{macros.render_field(sol_form.body, class='form-control', required='required')}}

									{{sol_form.submit(class='btn btn-primary')}}
								</form>
								{% endif %}
							</div> 
						</div> 
					</div>
				</div>

		</div>



		
{% else %}
	<h3>Please choose at least one topic.</h3>
{% endif %}